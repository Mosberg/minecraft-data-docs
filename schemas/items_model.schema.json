{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/Mosberg/minecraft-data-docs/tree/main/schemas/items_model.schema.json",
  "title": "Minecraft Items Model Definition",
  "type": "object",

  "properties": {
    "hand_animation_on_swap": { "type": "boolean" },
    "oversized_in_gui": { "type": "boolean" },
    "swap_animation_scale": { "type": "number" },

    "model": {
      "$ref": "#/definitions/itemsModel"
    }
  },

  "required": ["model"],
  "additionalProperties": false,

  "definitions": {
    "itemsModel": {
      "type": "object",
      "properties": {
        "type": { "type": "string" }
      },
      "required": ["type"],
      "oneOf": [
        { "$ref": "#/definitions/modelType" },
        { "$ref": "#/definitions/compositeType" },
        { "$ref": "#/definitions/conditionType" },
        { "$ref": "#/definitions/selectType" },
        { "$ref": "#/definitions/rangeDispatchType" },
        { "$ref": "#/definitions/emptyType" },
        { "$ref": "#/definitions/bundleSelectedItemType" },
        { "$ref": "#/definitions/specialType" }
      ]
    },

    "modelType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:model" },
        "model": { "type": "string" },
        "tints": {
          "type": "array",
          "items": { "$ref": "#/definitions/tintSource" }
        }
      },
      "required": ["type", "model"],
      "additionalProperties": false
    },

    "tintSource": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "minecraft:constant",
            "minecraft:dye",
            "minecraft:firework",
            "minecraft:grass",
            "minecraft:map_color",
            "minecraft:potion",
            "minecraft:team",
            "minecraft:custom_model_data"
          ]
        }
      },
      "required": ["type"],
      "additionalProperties": true
    },

    "compositeType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:composite" },
        "models": {
          "type": "array",
          "items": { "$ref": "#/definitions/itemsModel" }
        }
      },
      "required": ["type", "models"],
      "additionalProperties": false
    },

    "conditionType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:condition" },
        "property": {
          "type": "string",
          "enum": [
            "minecraft:broken",
            "minecraft:bundle/has_selected_item",
            "minecraft:carried",
            "minecraft:component",
            "minecraft:damaged",
            "minecraft:extended_view",
            "minecraft:fishing_rod/cast",
            "minecraft:has_component",
            "minecraft:keybind_down",
            "minecraft:selected",
            "minecraft:using_item",
            "minecraft:view_entity",
            "minecraft:custom_model_data"
          ]
        },
        "on_true": { "$ref": "#/definitions/itemsModel" },
        "on_false": { "$ref": "#/definitions/itemsModel" }
      },
      "required": ["type", "property", "on_true", "on_false"],
      "additionalProperties": true
    },

    "selectType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:select" },
        "property": {
          "type": "string",
          "enum": [
            "minecraft:block_state",
            "minecraft:charge_type",
            "minecraft:component",
            "minecraft:context_dimension",
            "minecraft:context_entity_type",
            "minecraft:display_context",
            "minecraft:local_time",
            "minecraft:main_hand",
            "minecraft:trim_material",
            "minecraft:custom_model_data"
          ]
        },
        "cases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "when": {},
              "model": { "$ref": "#/definitions/itemsModel" }
            },
            "required": ["when", "model"],
            "additionalProperties": false
          }
        },
        "fallback": { "$ref": "#/definitions/itemsModel" }
      },
      "required": ["type", "property", "cases"],
      "additionalProperties": true
    },

    "rangeDispatchType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:range_dispatch" },
        "property": {
          "type": "string",
          "enum": [
            "minecraft:bundle/fullness",
            "minecraft:compass",
            "minecraft:cooldown",
            "minecraft:count",
            "minecraft:crossbow/pull",
            "minecraft:damage",
            "minecraft:time",
            "minecraft:use_cycle",
            "minecraft:use_duration",
            "minecraft:custom_model_data"
          ]
        },
        "scale": { "type": "number" },
        "entries": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "threshold": { "type": "number" },
              "model": { "$ref": "#/definitions/itemsModel" }
            },
            "required": ["threshold", "model"],
            "additionalProperties": false
          }
        },
        "fallback": { "$ref": "#/definitions/itemsModel" }
      },
      "required": ["type", "property", "entries"],
      "additionalProperties": true
    },

    "emptyType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:empty" }
      },
      "required": ["type"],
      "additionalProperties": false
    },

    "bundleSelectedItemType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:bundle/selected_item" }
      },
      "required": ["type"],
      "additionalProperties": false
    },

    "specialType": {
      "type": "object",
      "properties": {
        "type": { "const": "minecraft:special" },
        "model": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "minecraft:banner",
                "minecraft:bed",
                "minecraft:chest",
                "minecraft:conduit",
                "minecraft:copper_golem_statue",
                "minecraft:decorated_pot",
                "minecraft:head",
                "minecraft:player_head",
                "minecraft:shield",
                "minecraft:shulker_box",
                "minecraft:standing_sign",
                "minecraft:hanging_sign",
                "minecraft:trident"
              ]
            }
          },
          "required": ["type"],
          "additionalProperties": true
        },
        "base": { "type": "string" }
      },
      "required": ["type", "model", "base"],
      "additionalProperties": false
    }
  }
}
